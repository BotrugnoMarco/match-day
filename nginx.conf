server {
    listen 80;
    server_name 137.74.43.136; # Sostituisci con il tuo dominio o l'IP del VPS

    # Percorso base per i file statici (la cartella 'match-day' sar√† dentro /var/www)
    root /var/www;
    index index.html;

    # Gestione Frontend su subpath /match-day
    location /match-day {
        try_files $uri $uri/ /match-day/index.html;
    }

    # Gestione WebSocket (Socket.io)
    # Fondamentale per il real-time. Senza queste intestazioni, i socket falliscono.
    location /socket.io/ {
        proxy_pass http://localhost:3000; # Il tuo backend Node.js
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # Gestione API (opzionale, se aggiungerai route REST in futuro)
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

